\chapter{Installation Instructions}
\label{chap:installation}
\section{Requirements}

The MCAPL software requires Java 11.   

{\bf IMPORTANT:} It does have to be Java 11.  The version of Java PathFinder currently packaged with the system does not work with later versions of Java.

\section{Installation}\index{installation}

\subsection{Installation of MCAPL 2025}\index{installation!Unix}\index{Unix}

\begin{itemize}
\begin{sloppypar}
\item Download the 2025 release from Github \texttt{https://github.com/mcapl/mcapl/releases/}.
\end{sloppypar}
\item Create a file \texttt{.jpf/site.properties} in your home directory with the path to \ajpfversion\ assigned to the value \texttt{mcapl}
  (e.g. \texttt{mcapl = \$\{user.home\}/mcapl-2025}).
  
If you have put the \texttt{mcapl} download in your home directory,  you should be able to do this at the UNIX command line by running the following commands in your home directory.
\begin{verbatim}
mkdir -p ~/.jpf && touch ~/.jpf/site.properties
\end{verbatim}
followed by:
\begin{verbatim}
echo "mcapl = ${user.home}/mcapl-2025" >> ~/.jpf/site.properties
\end{verbatim}

\item Within the \texttt{mcapl-2025} directory you should find \texttt{build.xml} to which you can apply ant to build ajpf. (e.g., at the command line, \lstinline{ant compile} to just compile the files and \lstinline{ant build} to build and run regression tests (takes just under fifteen minutes on a 3GHz Macbook with 16 GB memory))
\item Make sure you have the bin sub-directory of \texttt{mcapl-2025} on your java class path.
\item We recommend you set the \texttt{AJPF\_HOME}\index{AJPF\_HOME} environment variable to give the path to your MCAPL directory.
\end{itemize}

\subsection{Installation of Development Branch}\index{installation!development branch}\index{development branch}

You will need an installation of the Git\index{Git} version control system.  It is worth taking some time before you start to understand the basics of Git, particularly checking out versions, switching between branches, commiting changes and managing local and remote repositories.  There are several introductions to Git and Github on the web.

\begin{itemize}
\begin{sloppypar}
\item Clone the git repository from github. 
\begin{small}
\begin{verbatim}
git clone https://github.com/mcapl/mcapl.git
\end{verbatim}
\end{small}
\end{sloppypar}
\item Create a file \texttt{.jpf/site.properties} in your home directory with the path to mcapl assigned to the value \texttt{mcapl} (e.g. \texttt{mcapl = \$\{user.home\}/mcapl}).

If you have put the \texttt{mcapl} download in your home directory, you should be able to do this at the Unix command line by running the following commands in your home directory:

\begin{verbatim}
mkdir -p ~/.jpf && touch ~/.jpf/site.properties
\end{verbatim}
followed by:
\begin{verbatim}
echo "mcapl = ${user.home}/mcapl" >> ~/.jpf/site.properties
\end{verbatim}

\item Within the mcapl directory you should find \texttt{build.xml} to which you can apply ant to build ajpf. (e.g., at the command line, \lstinline{ant compile} to just compile the files and ant build to build and run regression tests (takes just under fifteen minutes on a 3GHz Macbook with 16 GB memory))
\item Make sure you have the bin sub-directory of mcapl on your java class path.
\item We recommend you set the \texttt{AJPF\_HOME}\index{AJPF\_HOME} environment variable to give the path to your mcapl directory.
\end{itemize}

\section{IntelliJ Installation}\index{installation!IntellijJ}\index{IntelliJ}
We also supply an IntelliJ Module file so you should be able to import \ajpfversion\ (or mcapl if using the development version) into IntelliJ.  You will need a Java 11 SDK and JRE installed and will probably also want to install the ant plugin in order to run the tests easily.  You may need to configure the Project Settings manually to use your Java 11 SDK.
\begin{itemize}
\item If you have the ant plugin installed, you should then be able to build ajpf by clicking on build in the ant window (ant symbol -- often on the right of the IDE).  This will build the project and run the ``quick'' test suite.  You can see the progress of this in the Messages window (usually at the bottom on the left of the IDE).
\item Create a file \texttt{.jpf/site.properties} with the path to \ajpfversion\ (or mcapl if using the development version)  assigned to the value \texttt{mcapl} (e.g. \texttt{mcapl = \$\{user.home\}/IdeaProjects/\ajpfversion}).
\item We recommend you set the \texttt{AJPF\_HOME} environment variable to give the path to your ajpf directory.  
\end{itemize}

\section{Eclipse Installation}\index{installation!Eclipse}\index{Eclipse}

We also supply an eclipse \texttt{.project} file so you should be able to import \ajpfversion\ (or mcapl if using the development version)  into eclipse.  You need to be using a version of Eclipse for Java Development.  We have tested on the Eclipse IDE for Java Developers.  You will need to configure Eclipse to use Java 11 as both its compiler and runtime environment. 
\begin{itemize}
\item In theory, you should then be able to build ajpf by clicking on the build.xml file, however we haven't tested this since moving to Java 11.
\item Create a file \texttt{.jpf/site.properties} with the path to \ajpfversion\ (or mcapl if using the development version)  assigned to the value \texttt{mcapl} (e.g. \texttt{mcapl = \$\{user.home\}/Eclipse/\ajpfversion}).
\item We recommend you set the \texttt{AJPF\_HOME} environment variable to give the path to your ajpf directory.  If necessary you can do this within the Environment tab for individual Run Configurations.
\end{itemize}

\section{Testing the Installation}

Chapter~\ref{chap:running} describes how to manually run and model-check a simple example program.

There are also number of JUnit\index{JUnit}\index{test} tests in the subdirectory \texttt{/src/tests} and examples in \texttt{/src/examples}.\index{example}.  Using ant, the build target in \texttt{build.xml} runs a set of tests.

